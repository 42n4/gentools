#!/bin/bash
# remove exited containers:
docker ps -aq --filter status=dead --filter status=exited | xargs -r docker rm -v
docker rm -v $(docker ps -aq -f status=exited)
# remove unused images:
docker images --no-trunc | grep '<none>' | awk '{ print $3 }' | xargs -r docker rmi
# remove unused volumes:
#newer version for docker 1.9
docker volume ls -qf dangling=true | xargs -r docker volume rm
docker rmi $(docker images -qf dangling=true)
#older
#find '/var/lib/docker/volumes/' -mindepth 1 -maxdepth 1 -type d | grep -vFf <(
#  docker ps -aq | xargs docker inspect | jq -r '.[] | .Mounts | .[] | .Name | select(.)'
#) | xargs -r rm -fr
